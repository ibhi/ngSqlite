!function(){"use strict";function t(t){function n(t){function n(t){return t.map(function(){return"?"}).join(",")}function r(t){return t.map(function(t){return t+"=?"}).join(",")}function o(t){return t.map(function(t){return t+"=?"}).join(" AND ")}function i(t){var n=[];if(t.rows){var e,r=t.rows.length;for(e=0;e<r;e++)n.push(t.rows.item(e))}return n}function u(){}return u.prototype.init=function(){if(window.cordova){if(this.db=window.sqlitePlugin.openDatabase({name:e.dbName+".db",location:e.dbLocation}),!this.db)return new Error("Error creating database")}else window.openDatabase?this.db=window.openDatabase(e.dbName+".db","1.0",e.dbName+" DB",2097152):alert("Your browser doesnt support WebSQL. Either use chrome or use this wrapper with cordova sqlite plugin")},u.prototype.exec=function(n,e){var r=this;return t(function(t,o){r.db.transaction(function(r){r.executeSql(n,e,function(n,e){console.log("Transaction completed ",n,e,i(e)),t(i(e))},function(t,n){console.log("Transaction Error: "+n.message),o(n)})})})},u.prototype.createTable=function(n,e){var r=this,o="CREATE TABLE IF NOT EXISTS "+n+" (",i=!0;for(var u in e){var c=e[u].default,a=e[u].ref,s=(i?(i=!1,""):",")+u+(e[u].type?" "+e[u].type:"")+(e[u].primary?" PRIMARY KEY":"")+(e[u].unique?" UNIQUE":"")+(e[u].notnull?" NOT NULL":"")+(c?" DEFAULT "+c:"")+(a?" REFERENCES "+a:"");o+=s}return o+=")",t(function(t,n){r.db.transaction(function(e){e.executeSql(o,[],function(n,e){console.log(n,e),t(e)},function(t,e){n(e)})})})},u.prototype.upsert=function(t,e,i){var u=this;i=i||[];var c,a,s,f,p=Object.keys(e),l=[],E=_.difference(p,i);return s=E.map(function(t){return e[t]}),f=i.map(function(t){return e[t]}),l=_.concat(s,f),i.length>0?(Array.isArray(i)&&(a=o(i)),c="UPDATE "+t+" SET "+r(E)+" WHERE "+a):c="INSERT INTO "+t+" ("+p.join(",")+")  VALUES ("+n(p)+")",u.exec(c,l)},u.prototype.select=function(t,n,e){var r,i,u,c=this,a=Object.keys(n);return u=e.map(function(t){return n[t]}),i=o(e),r="SELECT "+a.join(",")+" FROM "+t+" WHERE "+i,c.exec(r,u)},u.prototype.selectAll=function(t){var n=this,e="SELECT * FROM "+t;return n.exec(e,[])},u.prototype.delete=function(t,n,e){var r,i,u,c=this;Object.keys(n);return u=e.map(function(t){return n[t]}),i=o(e),r="DELETE FROM "+t+" WHERE "+i,c.exec(r,u)},u.prototype.query=function(t,n){var e=this;return e.exec(t,n)},u.prototype.bulkUpsert=function(n,e,r){var o=this;return t.all(e.map(function(t){return o.upsert(n,t,r)}))},u.prototype.drop=function(t){var n=this,e="DROP TABLE IF EXISTS "+t;return n.exec(e,[])},new u}var e={dbName:"demo",dbLocation:"default"};this.config=function(t){angular.extend(e,t)},this.$get=n,n.$inject=["$q"]}angular.module("ngSqlite",[]),angular.module("ngSqlite").provider("cache",t),t.$inject=["$qProvider"]}();